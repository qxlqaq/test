<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>阿拉德快递</title>
<link rel="stylesheet" href="assets/css/amazeui.css" />
<link rel="stylesheet" href="assets/css/common.min.css" />
<link rel="stylesheet" href="assets/css/other.min.css" />
</head>
<body>
<body class="register-container">
	<div class="layout">
		<!--===========layout-header================-->
		<div class="layout-header am-hide-sm-only">
			<!--topbar start-->
			<div class="topbar">
				<div class="container">
					<div class="am-g">
						<div class="am-u-md-3">
							<div class="topbar-left">
								<i class="am-icon-globe"></i> 超大陆
							</div>
						</div>
						<div class="am-u-md-9">
							<div class="topbar-right am-text-right am-fr">
								Follow us <i class="am-icon-facebook"></i> <i
									class="am-icon-twitter"></i> <i class="am-icon-google-plus"></i>
								<i class="am-icon-pinterest"></i> <i class="am-icon-instagram"></i>
								<i class="am-icon-linkedin"></i> <i class="am-icon-youtube-play"></i>
								<i class="am-icon-rss"></i> <a href="log" id="huanying1">登录</a>
								<a href="save" id="huanying2">注册</a>
							</div>
						</div>
					</div>
				</div>
			</div>
			<!--topbar end-->


			<div class="header-box" data-am-sticky>
				<!--header start-->
				<div class="container">
					<div class="header">
						<div class="am-g">
							<div class="am-u-lg-2 am-u-sm-12">
								<div class="logo">
									<a href=""><img src="assets/images/alade.png" alt="" /></a>
								</div>
							</div>
							<div class="am-u-md-10">
								<div class="header-right am-fr">
									<div class="header-contact">
										<div class="header_contacts--item">
											<div class="contact_mini">
												<i style="color: #7c6aa6" class="contact-icon am-icon-phone"></i>
												<strong>0 (855) 233-5385</strong> <span>周一~周五, 8:00 -
													20:00</span>
											</div>
										</div>
										<div class="header_contacts--item">
											<div class="contact_mini">
												<i style="color: #7c6aa6"
													class="contact-icon am-icon-envelope-o"></i> <strong>1662176217@qq.com</strong>
												<span>随时欢迎您的来信！</span>
											</div>
										</div>
										<div class="header_contacts--item">
											<div class="contact_mini">
												<i style="color: #7c6aa6"
													class="contact-icon am-icon-map-marker"></i> <strong>学府广场,</strong>
												<span>B座17楼PHE项目组</span>
											</div>
										</div>
									</div>
									<a href="" class="contact-btn">
										<button type="button"
											class="am-btn am-btn-secondary am-radius">联系我们</button>
									</a>
								</div>
							</div>
						</div>
					</div>
				</div>
				<!--header end-->


				<!--nav start-->
				<div class="nav-contain">
					<div class="nav-inner">
						<ul class="am-nav am-nav-pills am-nav-justify">
							<li class=""><a href="index">首页</a></li>
							<li><a href="orderCom" class="am-parent">物流</a> <!-- sub-menu start-->
								<ul class="sub-menu" style="margin-left:34px">
									<li class="menu-item"><a href="javascript:order()">我要寄件</a></li>
									<li class="menu-item"><a href="orderCom">收寄标准原则</a></li>
									<li class="menu-item"><a href="orderSelect">我要查单</a></li>
								</ul> <!-- sub-menu end--></li>
							<li><a href="about">关于我们</a></li>
							<li><a href="join">加入我们</a></li>
							<li><a href="contact">联系我们</a></li>
						</ul>
					</div>
				</div>
				<!--nav end-->
			</div>
		</div>

		<!--mobile header start-->
		<div class="m-header">
			<div class="am-g am-show-sm-only">
				<div class="am-u-sm-2">
					<div class="menu-bars">
						<a href="#doc-oc-demo1" data-am-offcanvas="{effect: 'push'}"><i
							class="am-menu-toggle-icon am-icon-bars"></i></a>
						<!-- 侧边栏内容 -->
						<nav data-am-widget="menu" class="am-menu  am-menu-offcanvas1"
							data-am-menu-offcanvas>
							<a href="javascript: void(0)" class="am-menu-toggle"></a>

							<div class="am-offcanvas">
								<div class="am-offcanvas-bar">
									<ul class="am-menu-nav am-avg-sm-1">
										<li class=""><a href="index">首页</a></li>
										<li class="am-parent">
						                    <a href="orderCom" class="" >物流</a>
						                      <ul class="am-menu-sub am-collapse ">
						                          <li class="">
						                            <a href="javascript:order()" class="" >我要寄件</a>
						                          </li>
						                          <li class="">
						                            <a href="orderCom" class="" >收寄标准原则</a>
						                          </li>
						                          <li class="">
						                            <a href="orderSelect" class="" >我要查单</a>
						                          </li>
						                      </ul>
						                  </li>
										<li><a href="about">关于我们</a></li>
										<li><a href="join">加入我们</a></li>
										<li><a href="contact">联系我们</a></li>
										<li class="nav-share-contain">
											<div class="nav-share-links">
												<i class="am-icon-facebook"></i> <i class="am-icon-twitter"></i>
												<i class="am-icon-google-plus"></i> <i
													class="am-icon-pinterest"></i> <i class="am-icon-instagram"></i>
												<i class="am-icon-linkedin"></i> <i
													class="am-icon-youtube-play"></i> <i class="am-icon-rss"></i>
											</div>
										</li>
										<li class=""><a href="log" id="log1" class="">登录</a></li>
										<li class=""><a href="save" id="log2" class="">注册</a></li>
									</ul>

								</div>
							</div>
						</nav>

					</div>
				</div>
				<div class="am-u-sm-5 am-u-end">
					<div class="m-logo">
						<a href=""><img src="assets/images/alade.png" alt=""></a>
					</div>
				</div>
			</div>
			<!--mobile header end-->
		</div>

	</div>





	<!--===========layout-container================-->
	<div class="register-box">
		<form action="" class="am-form" data-am-validator>
			<fieldset>
				<legend>
					注册用户
					<p class="register-info">账号要使用手机注册，请仔细核对后，填入正确信息。</p>
				</legend>

				<div class="am-form-group">
					<div class="am-g">
						<div class="am-u-md-2 am-padding-0 am-text-right">
							<label for="doc-vld-name-2" class="register-name">账号</label>
						</div>
						<div class="am-u-md-10">
							<input type="text" id="unnull" onblur="findName()"
								minlength="3" placeholder="输入用户名" required />
						</div>
						<div class="am-u-md-10" id="checkNameDiv" style="display: none;">
							<label id="checkName"></label>
						</div>
					</div>
				</div>
				
				<div class="am-form-group" id="onblurmargin" >
					<div class="am-g">
						<div class="am-u-md-2 am-padding-0 am-text-right">
							<label for="doc-vld-pwd-1" class="register-pwd">密码</label>
						</div>
						<div class="am-u-md-10">
							<input type="password" id="doc-vld-pwd-1" placeholder="输入密码"
								required />
						</div>
					</div>
				</div>

				<div class="am-form-group">
					<div class="am-g">
						<div class="am-u-md-2 am-padding-0 am-text-right">
							<label for="doc-vld-pwd-2">确认密码</label>
						</div>
						<div class="am-u-md-10">
							<input type="password" id="doc-vld-pwd-2"
								placeholder="请与上面输入的值一致" data-equal-to="#doc-vld-pwd-1" required />
						</div>
					</div>
				</div>
				<div class="am-form-group">
					<div class="am-u-md-2 am-padding-0 am-text-right">
						<label for="doc-vld-pwd-1" class="register-pwd">手机号</label>
					</div>
					<div class="am-u-md-10">
						<input type="text" id="telephone" placeholder="输入正确的手机号"
							pattern="^((13[0-9])|(14[5|7])|(15([0-3]|[5-9]))|(18[0,5-9]))\d{8}$"
							required />
					</div>
				</div>
				<div class="am-form-group am-hide-sm">
					<div class="am-u-md-2 am-padding-0 am-text-right">
						<label> <span>验证码</span>
						</label>
					</div>

					<div class="am-u-md-7">
						<input type="text" id="verify" placeholder="输入验证码" required />

					</div>
					<div class="am-u-md-3">
						<img id="imgs" onclick="changeImg()"
							style="position: absolute; margin-left: -5px; height: 38px"
							src="http://localhost:8088/baozha/client/verify.action">
					</div>
				</div>
				<div class="am-form-group am-hide-md-up">
					<div class="am-u-md-2 am-padding-0 am-text-right">
						<label> <span>验证码</span>
						</label>
					</div>

					<div class="am-u-md-10">
						<input type="text" style="width: 150px" id="verify2"
							placeholder="输入验证码" required />
					</div>
					<div class="am-u-md-10">
						<img id="imgss" onclick="changeImg()"
							style="position: absolute; margin-left: 180px; margin-top: -38px; height: 38px"
							src="http://localhost:8088/baozha/client/verify.action">
					</div>
				</div>
				<div class="am-g">
					<div class="am-u-md-2">
						<label ></label>
					</div>
					<div class="am-u-md-10 am-hide-sm">
						<label id="checkReg"></label>
					</div>
					 <div class="am-u-md-3 am-hide-md-up" style="margin-right:-70px">
						<label id="checkReg1"></label>
					</div> 
				</div>
				<div class="am-g">
					<div class="am-u-md-10">
						<button class="am-btn am-btn-secondary btn-loading-example" onclick="sendJson()" id="myLogin"
							data-am-loading="{spinner: 'circle-o-notch', loadingText: '加载中...', resetText: '加载失败'}"
							type="button">注册</button>
					</div>
				</div>
			</fieldset>
		</form>
	</div>

	</div>
	<script src="assets/js/jquery-2.1.0.js" charset="utf-8"></script>
	<script src="assets/js/amazeui.js" charset="utf-8"></script>
	<script src="assets/js/commont.js" charset="utf-8"></script>
	<script type="text/javascript">
		function changeImg() {
			//var img = document.getElementById("img"); 
			var dat = new Date();
			//alert(dat);
			//当前日期，从不重复
			$("#imgs").attr(
					"src",
					"http://localhost:8088/baozha/client/verify.action?date="
							+ dat);
			$("#imgss").attr(
					"src",
					"http://localhost:8088/baozha/client/verify.action?date="
							+ dat);
		}
		function sendJson() {
			
			$("#myLogin").button('loading');
			setTimeout(function(){
			$("#myLogin").button('reset');
			}, 3000);
			//请求json响应json
			//alert("开始时执行");
			var verify1="";
			var verify2=$("#verify2").val();
			var verifys=(verify1==$("#verify").val())?$("#verify2").val():$("#verify").val();
			login = {
				cname : $("#unnull").val(),
				cpassword : $("#doc-vld-pwd-1").val(),
				//verify : $("#verify").val(),
				telephone : $("#telephone").val(),
				verify : verifys
				
			};
			$.ajax({
				type : "post",
				url : "http://localhost:8088/baozha/client/save.action",
				contentType : "application/json;charset=utf-8",
				data : JSON.stringify(login),
				success : function(data) {
					//var result = eval('(' + data + ')');
					//alert(result.msg);
					var str=data.msg;
					//alert(str);
					 setTimeout(function () {
					if (str==true) {
						//alert("注册成功");
						window.location.href = "log";
					} else {
						$("#checkReg").empty();
						$("#checkReg").text(str);
						$("#checkReg1").empty();
						$("#checkReg1").text(str);
						changeImg();
					}
					 }, 2000);
				}
			});
		}
		function findName() {
			//请求json响应json
			login = {
				cname : $("#unnull").val()
			};
			$.ajax({
				type : "post",
				url : "http://localhost:8088/baozha/client/saveName.action",
				contentType : "application/json;charset=utf-8",
				data : JSON.stringify(login),
				success : function(data) {
					var result = eval('(' + data + ')');
					if (result.msg) {
						$("#checkName").empty();
						$("#checkNameDiv").show();
						$("#onblurmargin").attr("style","margin-top: -15px");
						
						 if($("#unnull").val()=="" ||$("#unnull").val()==null){
							$("#checkName").text("用户名不能为空！");
						}else{
							$("#checkName").text("该用户可以注册");
						} 
						//$("#checkName").text("该用户可以注册");
					} else {
						$("#checkName").empty();
						$("#checkNameDiv").show();
						$("#checkName").text("该用户已经注册");
					}
				}
			});
		}
	</script>
</body>

</html>
